{{- $.Scratch.Add "index" slice -}}{{- range where .Site.RegularPages "Section" "articles" -}}{{- $image := "" -}}{{- with .Params.images -}}{{- $image = index . 0 | relURL -}}{{- end -}}{{- $product_name := .Params.product_name | default .Title -}}{{- $summary := .Params.description | default (.Summary | plainify | truncate 200) -}}{{- $spec_text := "" -}}{{- with .Params.specs -}}{{- range $key, $value := . -}}{{- if (reflect.IsSlice $value) -}}{{- $spec_text = printf "%s %s:%s" $spec_text $key (delimit $value " ") -}}{{- else -}}{{- $spec_text = printf "%s %s:%s" $spec_text $key $value -}}{{- end -}}{{- end -}}{{- end -}}{{- $dict := dict "title" $product_name "permalink" .RelPermalink "categories" .Params.categories "summary" $summary "image" $image "contents" .Plain "price" .Params.price "score" .Params.score "specs" $spec_text -}}{{- $.Scratch.Add "index" $dict -}}{{- end -}}{{- $.Scratch.Get "index" | jsonify -}}
